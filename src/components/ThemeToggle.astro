---
import SunIcon from "./icons/Sun.astro"
import MoonIcon from "./icons/Moon.astro"
import SystemIcon from "./icons/System.astro"

const THEMES = ["Light", "Dark", "System"]
---

<div class="theme-toggler">
  <button id="theme-toggle-btn" class="theme-toggler__button">
    <span class="theme-toggler__sr">Choose theme</span>
    <SunIcon id="light" class="theme-toggler__icon theme-toggler__icon--light" />
    <MoonIcon id="dark" class="theme-toggler__icon theme-toggler__icon--dark" />
    <SystemIcon id="system" class="theme-toggler__icon theme-toggler__icon--system" />
  </button>
  <div id="themes-menu" class="theme-toggler__menu">
    <ul>
      {
        THEMES.map((theme) => (
        <li class="theme-toggler__option">{theme}</li>
        ))
      }
    </ul>
  </div>
</div>

<style lang="scss">
  .theme-toggler {
    position: relative;
    margin-left: .25rem;
    margin-right: .25rem;
    &__button {
      display: flex;
      background-color: var(--clr-transparent);
      appearance: none;
      border: none;
      transition: all 150ms cubic-bezier(.4,0,.2,1);
      &:hover {
        transform: scaleX(1.25) scaleY(1.25);
      }
    }
    &__sr {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
    &__icon {
      width: 1.25rem;
      height: 1.25rem;
      transition: all 150ms cubic-bezier(.4,0,.2,1);
      &--dark, &--system {
        position: absolute;
        scale: 0;
      }
    }
    &__menu {
      position: absolute;
      top: 2rem;
      right: 0;
      display: none;
      padding: .25rem;
      font-size: .875rem;
      line-height: 1.25rem;
      min-width: 8rem;
      background-color: hsl(0, 100%, 100%, .9);
      border: solid 1px hsl(220, 14%, 96%, 1);
      border-radius: .375rem;
      box-shadow: 0 3px 10px hsl(0, 0%, 0%, .2);
      backdrop-filter: blur(12px);
      &.open {
        display: inline;
        animation: scale-up-center 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
      }
    }
    &__option {
      padding: .375rem .5rem;
      border-radius: .125rem;
      cursor: default;
      &:hover {
        background-color: hsl(0, 0%, 64%, .4);
      }
    }
  }
  @keyframes scale-up-center {
    from {
      transform: scale(0.8);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
</style>